<!DOCTYPE html>
<html lang="ko" xmlns:data-th-="http://www.w3.org/1999/xhtml">
<head>
  <meta charset = "UTF-8">
  <title>onemoa mypage</title>
  <link href="../css/onemoa.css" rel="stylesheet">
  <link href="../css/onemoaMypage.css" rel="stylesheet">
  <link href="/onemoa/css/review.css" rel="stylesheet"/>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="/onemoa/js/login.js"></script>
  <script src="../js/onemoa.js"></script>
  <link rel="icon" href="../img/favicon1.ico">
  <link rel="shortcut icon" href="../img/favicon1.ico">
  <style>
    .mypageArea {
      min-height: 60vw;
    }

    #empty {
      text-align: center;
      margin-top: 20%;
    }

    .row {
      padding: 15px 10px;
      border: solid 1px #dbdbe5;
      border-radius: 4px;

      display: inline-block;
      vertical-align: middle;
      -webkit-transform: perspective(1px) translateZ(0);
      transform: perspective(1px) translateZ(0);
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      -webkit-transition-duration: 0.3s;
      transition-duration: 0.3s;
      -webkit-transition-property: box-shadow;
      transition-property: box-shadow;

      max-height: 20vw;
      min-height: 12vw;
      width: 15.3vw;
      margin-bottom: 2vw;

      /*max-height: 330px;*/
      /*min-height: 330px;*/
    }
    .row:hover {
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.6);
      background-color: #ffffff;
      opacity: 0.5;
    }

    .row:hover #userBtn {
      display: block;
    }

    .thumbnail {
      horiz-align: center;
      text-align: center;

      /*min-height: 250px;*/
      /*max-width: 200px;*/
    }

    .thumbnail > img {
      height: 10vw;
      width: 100%;
    }

    .row > p {
      margin-top: 0px;
      font-size: 1.2vw;
      margin-bottom: 5px;
      text-align: right;
    }

    .caption > p {
      max-height: 3vw;
      min-height: 3vw;
      margin-top: 5px;
      margin-bottom: 15px;
      font-size: 1.2vw;
      text-align: left;
    }

    .details {
      vertical-align: center;
    }

    .details img {
      margin-top: 1px;
      border: none;
    }

    .details p {
      display: inline;
      margin-top: 0px;
      font-size: 1vw;
    }

    #price > p {
      text-align: right;
      font-size: 1vw;
      margin-top: 0.5vw;
      margin-bottom: 0px;
    }

    .userBtn {
      float: left;
    }

    .background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.3);
      z-index: 1000;

      /* 숨기기 */
      z-index: -1;
      opacity: 0;
    }

    .show {
      opacity: 1;
      z-index: 1000;
      transition: all 0.5s;
    }

    .window {
      position: relative;
      width: 100%;
      height: 100%;
    }

    .popup {
      border-radius: 4px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #ffffff;
      box-shadow: 0 2px 7px rgba(0, 0, 0, 0.3);

      /* 임시 지정 */
      width: 700px;
      height: 800px;

      /* 초기에 약간 아래에 배치 */
      transform: translate(-50%, -40%);
    }

    .show .popup {
      transform: translate(-50%, -50%);
      transition: all 0.5s;
    }

    <!-- reviewForm css -->
    .star {
      position: relative;
      font-size: 2rem;
      color: #ddd;
    }

    .star input {
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      opacity: 0;
      cursor: pointer;
    }

    .star span {
      width: 0;
      position: absolute;
      left: 0;
      color: rgb(59, 56, 254);
      overflow: hidden;
      pointer-events: none;
    }

    .star1 {
      position: relative;
      font-size: 2rem;
      color: #ddd;
    }

    .star1 input {
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      opacity: 0;
      cursor: pointer;
    }

    .star1 span {
      width: 0;
      position: absolute;
      left: 0;
      color: rgb(59, 56, 254);
      overflow: hidden;
      pointer-events: none;
    }

    .star1 span {
      width: 0;
      position: absolute;
      left: 0;
      color: rgb(59, 56, 254);
      overflow: hidden;
      pointer-events: none;
    }
    .userBtn {
      float: left;
    }
    table {
      border-collapse:collapse;
    }

    tr {
      border-bottom: 1px solid black;
    }
    .tableSt {
      width: 100%;
      max-width: 100%;
      margin: auto;
      padding: 0px;
    }

    #underBanner p span, button {
      font-size: 16px;
      float : none;
      margin: 0 0px 0 0px;
    }

    .table2 {
      justify-content: center;
      display: flex;
      margin-top: 10px;
      margin-bottom: 10px;
    }

    .tableStyle {
      text-align: center;
      margin-bottom: 10px;
    }

    .reviewModal1 {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 2829px;
      display: none;
      background-color: rgba(0, 0, 0, 0.6);
    }
    .reviewModal1.show {
      display: block;
    }
    .reviewModal1.hide {
      display: none;
    }
    .reviewModal_body1 {
      overflow-y: auto;
      overflow-x: hidden;
      position: absolute;
      top: 16%;
      left: 50%;
      width: 40%;
      height: 800px;
      padding-top: 80px;
      padding-left: 4.029%;
      padding-right: 4.029%;
      background-color: rgb(255, 255, 255);
      border-radius: 10px;
      box-shadow: 0 2px 3px 0 rgba(34, 36, 38, 0.15);
      transform: translateX(-50%) translateY(-50%);
    }
    ::-webkit-scrollbar {
      display: none;
    }
    .closebtn2 {
      border: none;
      background-color: #fff;
      float: right;
      position: relative;
      top: 90px;
      right: 15%;
      z-index: 999;
    }
    .contestDetail p {
      font-size: 1.458vw;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .contestDetail .detail {
      width: 120%;
    }
    .contestDetail .detail li {
      float: left;
    }
    .contestDetail .detail li .detailimg {
      width: 90%;
      height: auto;
    }
    .contestDetail .detail li .detailimg img {
      width: 392px;
      height: 495px;
    }
    .contestDetail .detail li .contable {
      margin-left: 15.23%;
      font-size: 1.254vw;
      color: #909090;
      width: 100%;
    }
    .contestDetail .detail li .contable tr {
      width: 90%;
      height: 45px;
    }
    .contestDetail .detail li .contable tr td:nth-of-type(1) {
      width: 160px;
      color: #000;
    }
    .contestDetail .detail li .contable tr td span:nth-of-type(1) {
      line-height: 40px;

    }
    .contestDetail .detail li .contable tr td span {
      display: block;
      height: auto;
    }

    .contestdtype p:nth-of-type(1) {
      color: #000;
      border-bottom: 3px solid #000;
      padding-bottom: 3px;
    }
    .contestdtype span {
      display: block;
      width: 100%;
      height: 1px;
      background-color: #000;
      position: relative;
      top: 50px;
    }
    .person {
      width: 100%;
      height: auto;
      margin-top: 40px;
    }
    .person p {
      font-size: 1.350vw;
      color: #2f2f2f;
      line-height: 28px;
    }
    .person > p:nth-of-type(1) {
      margin-left: 20px;
    }
    .person p span {
      display: block;
    }
    .person .teamJang {
      width: 90%;
      height: auto;
      margin-left: 7%;
      margin-top: 60px;
    }
    .teamJang::after {
      content: "";
      clear: both;
      display: table;
    }
    .person .teamJang li {
      width: 15%;
      height: auto;
      margin-right: 5%;
      float: left;
      margin-bottom: 50px;
    }
    .person .teamJang li img {
      width: 100%;
      height: auto;
    }
    .person .teamJang li p {
      text-align: center;
    }
    .insert {
      text-align: center;
      margin-bottom: 100px;
      margin-top: 60px;
    }
    .insert p {
      font-size: 1.563vw;
      color: #2f2f2f;
      line-height: 35px;
    }
    .insert p span {
      display: block;
    }
    .insert .insertbtn {
      width: 12.99%;
      height: 71px;
      border: 1px solid #707fc2;
      margin: 30px auto;
      padding-top: -15px;
      border-radius: 5px;
      cursor: pointer;
    }
    .insert .insertbtn > p {
      font-size: 1.250vw;
      color: #707fc2;
    }
    .insert .insertbtn:hover > p {
      color: #fff;
      transition: all .3s;
    }
    .insert .insertbtn:hover {
      background-color: #707fc2;
      transition: all .3s;
    }

    .reviewModal2 {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 2830px;
      background-color: rgba(0, 0, 0, 0.6);
      display: none;
    }
    .reviewModal2.show {
      display: block;
    }
    .reviewModal2.hide {
      display: none;
    }
    .reviewModal_body3 {
      overflow-y: auto;
      position: absolute;
      top: 16%;
      left: 50%;
      width: 40%;
      height: 830px;
      padding-top: 80px;
      padding-left: 4.029%;
      padding-right: 4.029%;
      padding-bottom: 280px;
      background-color: rgb(255, 255, 255);
      border-radius: 10px;
      box-shadow: 0 2px 3px 0 rgba(34, 36, 38, 0.15);
      transform: translateX(-50%) translateY(-50%);
    }
    .closebtn3 {
      border: none;
      background-color: #fff;
      float: right;
      position: relative;
      top: 90px;
      right: 14.1%;
      z-index: 999;
    }
    .teamJangD {
      width: 100%;
      height: 550px;
    }
    .teamJangD .pp {
      text-align: left;
      font-weight: bold;
    }
    .teamJangD .tjd li {
      float: left;
      margin-top: 50px;
      width: 13%;
    }
    .teamJangD .tjd li:nth-of-type(2) {
      width: 70%;
    }
    .teamJangD .tjd li .tjdimg {
      width: 100%;
      height: 155px;
    }
    .teamJangD .tjd li .tjdimg img {
      width: 80.326%;
      height: auto;
      border-radius: 70%;
      overflow: hidden;
      margin-left: 14%;
    }
    .teamJangD .tjd li p {
      font-size: 1.254vw;
      text-align: center;
      position: relative;
      left: 10%;
    }
    .teamJangD .tjd .tjdtxt {
      background-color: #bcc5e9;
      border: 1px solid #bcc5e9;
      margin-left: 10%;
      border-radius: 15px;
      padding: 20px;
      font-size: 16px;
      width: 100%;
      height: 400px;
    }
    .portfolio {
      width: 100%;
      height: auto;
      padding-top: 10px;
      padding-bottom: 20px;
      padding-left: 2%;
      border-bottom: 1px solid #909090;
      border-top: 1px solid #909090;
      float: left;
    }
    .portfolio p {
      text-align: left;
      font-size: 1.354vw;
      font-weight: bold;
    }
    .portfolio button {
      background-color: transparent;
      border: none;
      position: relative;
      top: 4px;
      left: 8px;
    }
    .portfolio .po {
      width: 25%;
      height: 50px;
      padding-left: 10px;
      float: left;
      margin-right: 100%;
      margin-bottom: 20px;
    }
    .portfolio .popopo li {
      margin-bottom: 10px;
      margin-left: 1%;
    }

    .hhhhhh .mi {
      float: left;
    }
    .hhhhhh .mi img {
      position: inherit;
      right: 528px;
      top: 10px;
    }
    .recruitment {
      width: 100%;
      height: auto;
      padding-top: 10px;
      padding-bottom: 20px;
      padding-left: 2%;
      border-bottom: 1px solid #909090;
      float: left;
    }
    .recruitment p {
      text-align: left;
      font-size: 1.354vw;
      font-weight: bold;
      color: #344dbe;
    }
    .recruitment .recruit .re {
      width: 25%;
      height: 50px;
      padding-left: 10px;
      float: left;
      margin-right: 2%;
      margin-bottom: 10px;
    }
    .recruitment .recruit .re2 {
      width: 6%;
      height: 50px;
      padding-left: 10px;
      float: left;
      margin-bottom: 10px;
      margin-right: 67%;
      margin-bottom: 20px;
    }
    .recruitment .rerere li {
      margin-bottom: 10px;
      margin-left: 1%;
    }
    .recruitment button {
      background-color: transparent;
      border: none;
      position: relative;
      top: 4px;
      left: 8px;
    }
    .recruit .mi2 {
      float: left;
    }
    .recruit .mi2 img {
      position: inherit;
      right: 635px;
      top: 10px;
    }
    .teammate {
      text-align: center;
    }
    .teammate .tm {
      border: none;
      background-color: transparent;
      margin-right: 3%;
      font-size: 1.354vw;
      width: 15%;
      height: 80px;
      background-color: #707fc2;
      border: 1px solid #707fc2;
      margin-top: 100px;
      margin-bottom: 100px;
      color: #fff;
      border-radius: 10px;
    }
    .teammate .tm:hover {
      background-color: #48527d;
      color: #fff;
      transition: all .3s;
    }
    .teammate .tm:nth-of-type(2) {
      border: none;
      background-color: transparent;
      margin-right: 3%;
      font-size: 1.354vw;
      width: 15%;
      height: 80px;
      background-color: #999ba1;
      border: 1px solid #999ba1;
      margin-top: 100px;
      margin-bottom: 100px;
      color: #fff;
      border-radius: 10px;
    }
    .teammate .tm:nth-of-type(2):hover {
      background-color: #6c6d70;
      color: #fff;
      transition: all .3s;
    }
    #productTitle {
      font-size:1vw;
      margin-bottom: 20px;
      margin-top: 20px;
    }
    #productTitle2 {
      font-size:1vw;
    }
    #productTitle3 {
      font-size:1vw;
    }

    .dis2 {
      color: dodgerblue;
    }

    .star-rating {
      width: 101px;
    }

    .star-rating, .star-rating span {
      display: inline-block;
      height: 18px;
      overflow:hidden;
      /*background:url('img/reviewstar.png')no-repeat;*/
      background:url('../img/reviewstar.png')no-repeat;
    }

    .star-rating span {
      background-position: left bottom;
      line-height: 0;
      vertical-align: top;
    }

    #reviewStart {
      height: 50px;
    }

  </style>
  <!--<body style="overflow-x: hidden">-->
<body style="overflow-x: hidden" onload="checkLoaded()">
<div data-th-replace="/fragments/nav.html :: fragment-nav"></div>

<!-- contestDetail modal2 -->
<div class="reviewModal1" style="position: absolute; z-index: 1;">
  <button hidden class="closebtn2" onclick="clo()"><img style="position: fixed;" src="../img/x.png"></button>
  <div class="reviewModal_body1">
    <div class="contestDetail">
    </div>
    <div class="contestdtype">
      <p onclick="team()"><a href="#">일반리뷰</a></p>
      <p id="contestTypeTeam" onclick="team()"><a href="#">포토리뷰</a></p>
      <span></span>
    </div>

    <!-- 일반리뷰 -->
    <div class="contestIn">
        <div class="tab-content">
          <h1 style="text-align: center; margin-bottom: 30px;">리뷰를 입력해주세요.</h1>
          <form id="review-add-form" action='/onemoa/order/review/reviewAdd1' method="post">
          <div class="container">
              <table style="width: 650px; height: auto;" class="table">
                <tr>
                  <th>
                    상품 정보
                  </th>
                  <td colspan="2">
                    <img id="productThumbnail" src="" style="width: 100px; height: 100px;"></td>
<!--                    <img data-th-src="@{/product/files/{path}(path=${order.product.thumbnail})}" style="width: 100px; height: 100px;"></td>-->
                </tr>
                <tr>
                  <th>상품 이름</th>
                  <td><p id="productTitle"></p></td>
                </tr>
                <tr>
                  <th>별점</th>
                  <td>
                      <span class="star">
                              ★★★★★
                      <span>★★★★★</span>
                      <input name="score" style="transform: translateY(0px);"
                             type="range" oninput="drawStar(this)" value="1" step="0.5" min="1" max="5">
                      </span>
                  </td>
                </tr>
                <tr>
                  <th>리뷰 제목</th>
                  <td colspan="5"><textarea name="title" style="resize: none;" rows='auto' cols='70' required></textarea></td>
                </tr>
                <tr>
                  <th>리뷰 내용</th>
                  <td colspan="5"><textarea name="content" style="resize: none;" rows='10' cols='70' required></textarea></td>
                </tr>
              </table>
              <div style="display: flex; justify-content: center;">
                <button type='button' style="display: flex; justify-content: center; margin-top: 30px; padding: 10px;"
                        class="btn btn-primary btn-sm" id="review-add">리뷰 등록하기</button>
                <button type='button' style="display: flex; justify-content: center; margin-top: 30px; padding: 10px;"
                        class="btn btn-primary btn-sm" onclick="clo()">취소</button>
                <input hidden name="status" value="1">
                <input hidden id="orderNo" type="number" name="orderNo" readonly>
              </div>
            </div>
          </form>
      </div>
    </div>

    <!-- 포토리뷰 -->
    <div class="person" style="display: none;">
        <div class="tab-content">
          <h1 style="text-align: center; margin-bottom: 30px; margin-top: -40px;">리뷰를 입력해주세요.</h1>
          <form id="review-add-form1" action='/onemoa/order/review/reviewAdd' method="post" enctype="multipart/form-data">
            <div class="container">
              <table style="width: 650px; height: auto;"  class="table">
                <tr>
                  <th>
                    상품 정보
                  </th>
                  <td colspan="2">
                    <img id="productThumbnail2" src="" style="width: 100px; height: 100px;">
                  </td>
<!--                    <img data-th-src="@{/product/files/{path}(path=${order.product.thumbnail})}"-->
<!--                         style="width: 100px; height: 100px;"> -->
                  </td>
                </tr>
                <tr>
                  <th>상품 이름</th>
                  <td><p id="productTitle2"></p></td>
                </tr>
                <tr>
                  <th>별점</th>
                  <td>
                        <span class="star1">
                                ★★★★★
                        <span>★★★★★</span>
                        <input name="score" style="transform: translateY(0px);"
                               type="range" oninput="drawStar1(this)" value="1" step="0.5" min="1" max="5">
                        </span>
                  </td>
                </tr>
                <tr>
                  <th>리뷰 제목</th>
                  <td colspan="5"><textarea name="title" style="resize: none;" rows='auto' cols='70' required></textarea></td>
                </tr>
                <tr>
                  <th>리뷰 내용</th>
                  <td colspan="5"><textarea name="content" style="resize: none;" rows='10' cols='70' required></textarea></td>
                </tr>
                <tr>
                  <th>첨부파일</th>
                  <td colspan="3">
                    <input name="files" type="file" multiple accept="image/*"></td>
                </tr>
              </table>
              <div style="display: flex; justify-content: center; margin-top: 10px;">
                <button style="padding: 10px;"  type='button' class="btn btn-primary btn-sm" id="review-add1">
                  리뷰 등록하기</button>
              <button type='button' style="display: flex; justify-content: center; padding: 10px;"
                        class="btn btn-primary btn-sm" onclick="clo()">취소</button>
              </div>
              <input hidden name="status" value="1">
              <input hidden id="orderNo2" type="number" name="orderNo" readonly>
<!--              <input style="display:none" name="files" type="file" multiple accept="image/*">-->
            </div>
          </form>
        </div>
      </div>
  </div>
</div><!--modal2-->

<!-- modal3 review detail -->
<div class="reviewModal2" style="position: absolute; z-index: 1;">
  <button hidden class="closebtn3" onclick="clo2()"><img src="../img/x.png"></button>
  <div class="reviewModal_body3">
    <h1 style="text-align: center; margin-top:20px;">리뷰 확인하기</h1>
      <div class="container">
        <table style="width: 650px; height: auto;" class="table">
          <tr>
            <th style="min-width: 80px">
              상품 정보
            </th>
            <td colspan="4">
              <img id="productThumbnail3" src="" style="width: 100px; height: 100px;">
<!--              <img data-th-src="@{/product/files/{path}(path=${order.product.thumbnail})}"-->
<!--                   style="width: 100px; height: 100px;"></td>-->
          </tr>
          <tr>
            <th>상품 이름</th>
            <td><p id="productTitle3"></p></td>
          </tr>
          <tr>
            <th>별점
            <td>
              <div style="height: 50px; margin-top: 10px" class="star-rating">
                <span id="reviewStart" style="width:100%"></span>
              </div>
            </td>
            <td style="text-align: right; font-weight: 700;">작성일</td>
              <td style="margin-left: 10px;"><span id="rwCreatedDate"></span></td>
            <!--            <td><p id="rwCreatedDate" data-th-text="${orderReview.createdDate}">작성일</p></td>-->
            </td>
            </td>
            </th>
          </tr>
          <tr>
            <th >리뷰 제목</th>
            <td colspan="5">
              <textarea id="reviewTitle" name="title" style="resize: none;" rows='4' cols='70' readonly>후기 제목</textarea>
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
<!--            <td colspan="5"><textarea name="title" style="resize: none;" rows='auto' cols='70'  data-th-text="${orderReview.title}">후기 제목</textarea></td>-->
          </tr>
          <tr>
            <th>리뷰 내용</th>
              <td colspan="5">
                <textarea id="reviewContent" name="title" style="resize: none;" rows='20' cols='70' readonly>후기 제목</textarea>
              </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
<!--            <td colspan="5"><textarea name="content" style="resize: none;" rows='10' cols='70' data-th-text="${orderReview.content}">후기 제목</textarea></td>-->
          </tr>
          <th id="fileTh" class="tableStyle">첨부파일</th>
           <td colspan="5" class="tableStyle">
             <ul id="reviewFile">
             </ul>
           </td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </table>
        <div style="display: flex; justify-content: center;">
          <button type='button' style="display: flex; justify-content: center; margin-top: 30px; padding: 10px;"
                  class="btn btn-primary btn-sm" onclick="clo2()">취소</button>
          <!--                                <button type='button' class="btn btn-primary btn-sm" id="review-update">수정하기</button>-->
        </div>
<!--        <input hidden type="number"-->
<!--               data-th-value="${order.no}"-->
<!--               name="orderNo" readonly>-->
<!--        <input data-th-if="${#lists.isEmpty(orderReview.orderReviewAttachedFiles)}"-->
<!--               style="display:none" name="files" type="file" multiple accept="image/*">-->
      </div>
  </div>
</div><!--modal3-->

<ul class="myPage">
  <li class="mypageArea">
    <div class="nick">
      <img data-th-src="${'/onemoa/member/files/' + session.loginMember.profile}">
      <p data-th-text="${session.loginMember.nickname}">닉네임님</p>
    </div>
    <div class="mypageNav">
      <div class="myonemoa">
        <p>마이원모아</p>
        <span class="mybar">
      </div>
      <ul class="mynav">
        <li><a class="font2" href="../mypage/portfolioList">포트폴리오 관리</a></li>
        <li><a class="font2" href="/onemoa/mypage/contestList">공모전 관리</a></li>
        <li><a class="font" href="/onemoa/mypage/buysList">구매 관리</a></li>
        <li><a class="font2" href="/onemoa/mypage/salesList">판매 관리</a></li>
        <li><a class="font2" href="/onemoa/mypage/productList">상품 관리</a></li>
        <li><a class="font2" href="">결제내역</a></li>
        <li><a class="font2" href="">1:1 문의내역</a></li>
        <li class="menu">
          <a class="font2" href="myinfo">계정설정</a>
          <ul class="hide">
            <li><a class="font2" href="../mypage/myinfo">내정보수정</a></li>
            <li><a class="font2" href="../mypage/changepw">비밀번호변경</a></li>
            <li><a class="font2" href="../mypage/leave">회원탈퇴</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </li>
  <li class="mypageArea">
    <div class="mypagePortfolio">
      <div class="portfolioBoxCon">
        <p class="mptxt2" style="width: 100%">구매관리</p>
        <ul class="portfolioList">
          <div id="empty" data-th-if="${#lists.isEmpty(buys)}"><img data-th-src="@{../img/emptycart.png}" width="20%" height="20%"/>
            <p><br>구매한 상품이 없습니다.</p></div>
          <div data-th-if="${!#lists.isEmpty(buys)}">
            <table class="tableSt">
              <tr>
                <th class="tableStyle">상품번호</th>
                <th class="tableStyle">상품이름</th>
                <th class="tableStyle">판매자</th>
                <th class="tableStyle">결제금액</th>
                <th class="tableStyle">결제일시</th>
                <th class="tableStyle">주문상태</th>
                <th class="tableStyle">후기</th>
              </tr>
              <tr data-th-each="buy : ${buys}">
                <td class="tableStyle" data-th-text="${buy.no}">상품번호들어가요오</td>
                <td class="tableStyle" data-th-text="${buy.product.title}">상품이름들어가요오</td>
                <td class="tableStyle" data-th-text="${buy.product.writer.nickname}">판매한사람</td>
                <td class="tableStyle" data-th-text="${#numbers.formatInteger(buy.product.price, 3, 'COMMA')} + ' 원'">결제금액들어가요오</td>
                <td class="tableStyle" data-th-text="${#temporals.format(buy.createdDate, 'yyyy-MM-dd')}">결제일시들어가요</td>
                <td class="tableStyle" data-th-text="${buy.orderStatus.name}">주문상태들어가요</td>
                <td class="table2">
                  <button class="#underBanner p span, button" data-th-if="${buy.orderReview == null}" data-th-id="'orderReview-btn-'+${buy.no}">
                    <span class="con" data-th-id="${buy.no}" data-th-value="${buy.no}"> 후기작성 </span>
                  </button>
                  <button class="#underBanner p span, button" data-th-if="${buy.orderReview != null}" data-th-id="'orderReviewWritten-btn-'+${buy.no}">
<!--                    <a-->
<!--                       data-th-href="@{/order/review/reviewDetail(no=${buy.no})}"-->
<!--                       onclick="window.open(this.href, '_blank', 'width=800, height=800'); return false;" style="text-decoration: none;">-->
<!--                      후기보기</a>-->
                    <span class="dis2" data-th-id="${buy.no}" data-th-value="${buy.no}">후기보기</span>
                  </button>
                </td>
              </tr>
            </table>
          </div>
        </ul>
      </div>
    </div>
  </li>
</ul>
</div>
<footer data-th-replace="/fragments/footer.html :: fragment-footer"></footer>
<script th:inline="javascript">

  function checkLoaded() {

    // console.log([[${buys}]].at(0))
    console.log([[${buys}]].at(0)['orderReview'])
    console.log("Loaded")
    // console.log(window.location)
  }

  console.log('window.opener', window.opener);
  console.log('window.parent', window.parent);

  $("#review-add").click(function() {
    setTimeout(function () {
      $('#review-add-form').submit()
    }, 100);

    setTimeout(function () {
      window.opener.location.href = window.opener.location.href
    }, 5000);

    // opener.parent.location.reload(true)
    // setTimeout(() => {window.self.close();}, 100);
  });

  $("#review-add1").click(function() {
    setTimeout(function() {
      $('#review-add-form1').submit();
      window.opener.location.reload();
    }, 100);
  });

  let value = "";

  const drawStar = (target) => {
    document.querySelector(`.star span`).style.width = `${target.value * 20}%`;
    value = `${target.value}`;
    console.log(value);
    // string 으로 나감
  }

  const drawStar1 = (target) => {
    document.querySelector(`.star1 span`).style.width = `${target.value * 20}%`;
    // string 으로 나감
  }

  $(".con").click(function () {
    console.log("Test");
    if ($('.reviewModal1').css('display') == 'none'){
      $('.reviewModal1').show();
      $('.reviewModal2').hide();
      body.style.overflow = 'hidden';
    } else{
      $('.reviewModal1').hide();
      body.style.overflow = 'auto';
    }

    let buyNo = $(this).attr("id");

    $.ajax({
      type: "POST",
      url:"/onemoa/order/review/reviewForm",
      data:{"buyNo": buyNo},
      success: function (result) {
        console.log(result);
        $("#productThumbnail").attr("src", "/onemoa/product/files/" + result.product.thumbnail);
        $("#productThumbnail2").attr("src", "/onemoa/product/files/" + result.product.thumbnail);
        $("#productTitle").text(result.product.title);
        $("#productTitle2").text(result.product.title);
        $("#orderNo").val(result.no);
        $("#orderNo2").val(result.no);
      },
    })
  });

  $("#review-add1").click(function() {
    let productThumbnail = $("");
    let start = value;
    console.log(start);

    $.ajax({
      type:"POST",
      url:"",
      data:{},
      success: function (resutl) {

      }
    });
  });

  function clo(){
    if ($('.reviewModal1').css('display') == 'show'){
      $('.reviewModal1').hide();
    } else{
      $('.reviewModal1').hide();
      body.style.overflow = 'auto';
    }
  }

  $(".dis2").click(function() {
    if ($('.reviewModal2').css('display') == 'none'){
      $('.reviewModal2').show(); // 팀원모집하기 모달
      $('.reviewModal1').hide(); // 공모전 팀원구해요 창(팀 팀장 리스트)
    } else{
      $('.reviewModal2').hide();
      $('.reviewModal1').hide();
    }

    let buyNo = $(this).attr("id");

    $.ajax({
      type: "POST",
      url:"/onemoa/order/review/reviewDetail",
      data:{"buyNo": buyNo},
      success: function (result) {
        console.log(result);
        $("#productThumbnail3").attr("src", "/onemoa/product/files/" + result.order.product.thumbnail);
        $("#productTitle3").text(result.order.product.title);
        // $("#reviewStart").text();
        console.log(result.orderReview.score);
        $("#rwCreatedDate").text(result.orderReview.createdDate);
        $("#reviewTitle").text(result.orderReview.title);
        $("#reviewContent").text(result.orderReview.content);
        let reviewScore = result.orderReview.score;
        if (reviewScore == 5) {
          $("#reviewStart").text(reviewScore);
          $("#reviewStart").css("width", 100);
        } else if (reviewScore == 4.5) {
          $("#reviewStart").text(reviewScore);
          $("#reviewStart").css("width", 90);
        } else if (reviewScore == 4) {
          $("#reviewStart").text(reviewScore);
          $("#reviewStart").css("width", 80);
        } else if (reviewScore == 3.5) {
          $("#reviewStart").text(reviewScore);
          $("#reviewStart").css("width", 70);
        } else if (reviewScore == 3) {
          $("#reviewStart").text(reviewScore);
          $("#reviewStart").css("width", 60);
        } else if (reviewScore == 2.5) {
          $("#reviewStart").text(reviewScore);
          $("#reviewStart").css("width", 50);
        } else if (reviewScore == 2) {
          $("#reviewStart").text(reviewScore);
          $("#reviewStart").css("width", 40);
        } else if (reviewScore == 1.5) {
          $("#reviewStart").text(reviewScore);
          $("#reviewStart").css("width", 30);
        } else if (reviewScore == 1) {
          $("#reviewStart").text(reviewScore);
          $("#reviewStart").css("width", 20);
        }
        let ulList = "";
        let filesLength = result.orderReview.orderReviewAttachedFiles.length;
        if (filesLength == 0) {
          $("#fileTh").remove();
        } else {
          for (let i = 0; i < filesLength; i++) {
            ulList += "<li style=\"float:left; margin-right:5%; list-style:none; width:10%\">" +
                "<a href='/onemoa/review/files/" + result.orderReview.orderReviewAttachedFiles[i].filepath + "'>" +
                "<img src='/onemoa/review/files/" + result.orderReview.orderReviewAttachedFiles[i].filepath +
                "' style=\"width:100%; height:auto;\">" + "</a>" + "</li>";
          }
          $("#reviewFile").html(ulList);
        }
      },
    })
  });

  function clo2(){
    if ($('.reviewModal2').css('display') == 'show'){
      $('.reviewModal2').hide();
    } else{
      $('.reviewModal2').hide();
    }
  }

</script>
</body>
</html>